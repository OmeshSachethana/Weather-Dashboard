---
import { useState } from 'preact/hooks';

const { onSearch, defaultLocation = "London" } = Astro.props;
let location = defaultLocation;
---

<div class="weather-search">
  <div class="relative max-w-xl mx-auto">
    <div class="relative flex items-center">
      <i class="fas fa-search absolute left-4 text-orange-400"></i>
      <input
        id="search-input"
        type="text"
        placeholder="Search for a city..."
        value={location}
        onInput={(e) => location = e.target.value}
        class="w-full pl-12 pr-12 py-4 bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm 
               rounded-2xl border-2 border-orange-200 dark:border-orange-800 
               focus:outline-none focus:ring-4 focus:ring-orange-300/30 
               focus:border-orange-400 dark:focus:border-orange-500 
               text-gray-800 dark:text-gray-200 text-lg placeholder-gray-500 
               transition-all duration-300 shadow-lg hover:shadow-xl"
      />
      <button
        onclick={() => onSearch(location)}
        class="absolute right-2 px-6 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
               text-white font-semibold rounded-xl hover:from-orange-600 
               hover:to-amber-600 transition-all duration-300 transform 
               hover:scale-105 active:scale-95 shadow-lg hover:shadow-orange-500/30"
      >
        Search
      </button>
    </div>
    <div class="mt-4 flex flex-wrap gap-2 justify-center">
      {['London', 'New York', 'Tokyo', 'Paris', 'Sydney', 'Dubai'].map((city) => (
        <button
          onclick={() => onSearch(city)}
          class="px-4 py-2 bg-gradient-to-r from-orange-100 to-amber-100 
                 dark:from-orange-900/30 dark:to-amber-900/30 rounded-full 
                 text-orange-700 dark:text-orange-300 hover:from-orange-200 
                 hover:to-amber-200 dark:hover:from-orange-800/50 
                 transition-all duration-300 text-sm font-medium"
        >
          {city}
        </button>
      ))}
    </div>
  </div>
</div>

<script>
  // Add Enter key functionality
  document.addEventListener('DOMContentLoaded', () => {
    const input = document.getElementById('search-input');
    if (input) {
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const searchButton = input.nextElementSibling;
          searchButton.click();
        }
      });
    }
  });
</script>