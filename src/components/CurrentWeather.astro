---
const { weatherData } = Astro.props;

// Weather condition icons mapping
const weatherIcons = {
  'Clear': 'fas fa-sun',
  'Clouds': 'fas fa-cloud',
  'Rain': 'fas fa-cloud-rain',
  'Snow': 'fas fa-snowflake',
  'Thunderstorm': 'fas fa-bolt',
  'Drizzle': 'fas fa-cloud-rain',
  'Mist': 'fas fa-smog',
  'Fog': 'fas fa-smog',
  'Haze': 'fas fa-smog',
  'Smoke': 'fas fa-smog',
  'Dust': 'fas fa-smog',
  'Sand': 'fas fa-smog',
  'Ash': 'fas fa-smog',
  'Squall': 'fas fa-wind',
  'Tornado': 'fas fa-tornado'
};
---

<div class="current-weather">
  {weatherData && (
    <div class="bg-gradient-to-br from-orange-500/10 via-amber-500/5 to-orange-600/10 
                backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-orange-200/50 
                dark:border-orange-800/30">
      <div class="flex flex-col md:flex-row items-center justify-between">
        <div class="text-center md:text-left mb-6 md:mb-0">
          <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
            <h2 class="text-3xl font-bold text-gray-800 dark:text-white">
              {weatherData.name}, {weatherData.sys.country}
            </h2>
            <img 
              src={`https://flagcdn.com/w40/${weatherData.sys.country.toLowerCase()}.png`}
              alt={weatherData.sys.country}
              class="w-8 h-6 object-cover rounded shadow"
            />
          </div>
          
          <div class="flex items-center justify-center md:justify-start gap-4">
            <div class="relative">
              <i class={`${weatherIcons[weatherData.weather[0].main] || 'fas fa-cloud'} 
                         text-6xl text-orange-500 dark:text-orange-400`}></i>
              <div class="absolute -top-2 -right-2 w-6 h-6 bg-orange-500 
                         rounded-full flex items-center justify-center">
                <img 
                  src={`https://openweathermap.org/img/wn/${weatherData.weather[0].icon}.png`}
                  alt={weatherData.weather[0].description}
                  class="w-4 h-4"
                />
              </div>
            </div>
            <div>
              <div class="text-7xl font-black bg-gradient-to-r from-orange-600 to-amber-600 
                         bg-clip-text text-transparent dark:from-orange-400 dark:to-amber-400">
                {Math.round(weatherData.main.temp)}째C
              </div>
              <p class="text-lg text-gray-600 dark:text-gray-300 capitalize">
                {weatherData.weather[0].description}
              </p>
            </div>
          </div>
        </div>
        
        <div class="text-center">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-2">
            Feels like {Math.round(weatherData.main.feels_like)}째C
          </div>
          <div class="flex items-center gap-6">
            <div class="text-center">
              <div class="text-2xl font-semibold text-gray-700 dark:text-gray-200">
                {weatherData.main.humidity}%
              </div>
              <div class="text-sm text-gray-500 dark:text-gray-400">Humidity</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-semibold text-gray-700 dark:text-gray-200">
                {weatherData.wind.speed} m/s
              </div>
              <div class="text-sm text-gray-500 dark:text-gray-400">Wind</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="mt-8 pt-8 border-t border-orange-200/50 dark:border-orange-800/30">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
          <div class="bg-white/50 dark:bg-gray-800/50 rounded-2xl p-4 text-center 
                     backdrop-blur-sm border border-orange-100 dark:border-orange-900/50">
            <i class="fas fa-temperature-high text-2xl text-orange-500 mb-2"></i>
            <div class="font-semibold text-gray-800 dark:text-gray-200">
              {Math.round(weatherData.main.temp_max)}째C
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">High</div>
          </div>
          
          <div class="bg-white/50 dark:bg-gray-800/50 rounded-2xl p-4 text-center 
                     backdrop-blur-sm border border-orange-100 dark:border-orange-900/50">
            <i class="fas fa-temperature-low text-2xl text-orange-500 mb-2"></i>
            <div class="font-semibold text-gray-800 dark:text-gray-200">
              {Math.round(weatherData.main.temp_min)}째C
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">Low</div>
          </div>
          
          <div class="bg-white/50 dark:bg-gray-800/50 rounded-2xl p-4 text-center 
                     backdrop-blur-sm border border-orange-100 dark:border-orange-900/50">
            <i class="fas fa-eye text-2xl text-orange-500 mb-2"></i>
            <div class="font-semibold text-gray-800 dark:text-gray-200">
              {weatherData.visibility / 1000} km
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">Visibility</div>
          </div>
          
          <div class="bg-white/50 dark:bg-gray-800/50 rounded-2xl p-4 text-center 
                     backdrop-blur-sm border border-orange-100 dark:border-orange-900/50">
            <i class="fas fa-tachometer-alt text-2xl text-orange-500 mb-2"></i>
            <div class="font-semibold text-gray-800 dark:text-gray-200">
              {weatherData.main.pressure} hPa
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">Pressure</div>
          </div>
        </div>
      </div>
    </div>
  )}
</div>